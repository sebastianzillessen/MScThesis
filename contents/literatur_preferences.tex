\subsection{Extended Argumentation Framework - Working with Preferences in $AF$}
\label{sub:eaf}

A Dung's argumentation framework is based on logical theory which is transformed to arguments and a binary attack relation. By applying the different extensions on the created argumentation framework accepted arguments can be evaluated. 
However for practical reasons and in some applications only one unique set of accepted arguments has to be determined. In addition personal preferences, contextual requirements or additional information might result in some arguments having a higher priority than others. The order of preferences is often itself defeasible and conflicting and therefore subject to argumentation. These aspects have not been considered in Dung's approach \cite{Modgil2009}.



In this thesis the \gls{EAF} approach introduced by Modgil in \cite{Modgil2009} will be used, as it provides a useful meta-level on preferences between other arguments, by extending Dung's framework with a new attack relation between arguments and attacks. This overcomes the issues of defining orders over preferences (see \autoref{sub:paf}) or value-evaluation functions (see \autoref{sub:vaf}) and enables us to argue about preferences regardless whether they are defeasible or conflicting. In addition it provides a really user-friendly way to consider preferences which will improve the understandability for clinicians, who will be the main actors (see \autoref{sub:sassoon:actors}) in the final system.
\autoref{fig:eaf_intro}, which is taken from \cite{Modgil2009}, shows an example for a \gls{EAF} representing the following arguments:

\begin{itemize}
	\item $A$: "Today will be dry in London since the BBC forecast sunshine"
	\item $B$: "Today will be wet in London since CNN forecast rain"
	\item $C$: "But I think the BBC are more trustworthy than CNN"
	\item $D$: "However, statistically CNN are more accurate forecasters than the BBC"
	\item $E$: "Basing on a comparison on statistics is more rigorous and rational than basing a comparison on your instincts about their relative trustworthiness"
\end{itemize}

\bigskip

\Glspl{EAF} have to be considered, as Sassoon \textit{et al.} defined the defeasible knowledge over possible models in there latest paper \cite{sassoon2016CD} by using this approach. It is reasonable to consider an order of importance for different preferences (e.g. preferences based on statistical knowledge should be regarded as more important than the clinicians personal preference). As this can be easily achieved in \glspl{EAF} by applying the preferences one by one related to their \glspl{CD}, this approach is in favour.

Hence, a brief introduction to the definition of \glspl{EAF} is presented in the following chapter.
\begin{figure}[b!]
\centering
\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=2cm,
                    thick]

  \node[main] (A) {A};
  \node[small,n_fill_green] (B) [left of=A] {B};
  \node[small,n_fill_green] (C) [above right of=A] {C};
  \node[main] (D) [below right of=A] {D};
  \node[small,n_fill_green] (E) [right=3cm of A] {E};
  
  \path[every node/.style={font=\sffamily\small}]
    (A) edge [bend right, dashed] coordinate [pos=0.5] (AB) node [left] {} (B)
    (B) edge [bend right] coordinate [pos=0.5] (BA) node [left] {} (A)
    (C) edge [bend right] coordinate [pos=0.5] (CD) node [left] {} (D)
    (D) edge [bend right, dashed] coordinate [pos=0.5] (DC) node [left] {} (C)
    ;
   \path [every node/.style={red}] 
   (C) edge [->>, bend right] node [left] {} (AB)
   (D) edge [->>, bend left, dashed] node [left] {} (BA)
   (E) edge [->>] node [left] {} (DC)
   ;
\end{tikzpicture}
\caption{\gls{EAF} about the weather forcasts with preferences over arguments. Dashed attacks are canceled out. Double-arrow-headed edges represent attacks on attacks. Green nodes represent accepted arguments in the unique preferred extension}
\label{fig:eaf_intro}
\end{figure}


\glsreset{EAF}
\begin{definition}
	An \gls{EAF} is a triple $\langle \S, \R, \D \rangle$ with $\S$ being a set of arguments and:
	\begin{itemize}
		\item $\R \subseteq \S \times \S$: attack relation.
		\item $\D \subseteq \S \times \R$: new attack relation of arguments on attacks.
		\item $\{(A, (B, C)), (A', (C, B))\} \subseteq \D \rightarrow \{(A, A'), (A', A)\} \subseteq \R$ (any arguments expressing contradictory preferences must attack each other).
	\end{itemize}
\end{definition}

\begin{remark}
To be able to express a preference between $C$ and $B$ by an additional argument $A$ it is required, that the arguments $B, C$ express contradictory preferences. This can be achieved, if $A$ defines a preference of $C$ over $B$ and the \gls{EAF} contains $\{(B, C), (C, B)\} \in \R$ and $(A, (B, C)) \in \D$. 
\end{remark}

Let $\Delta = \langle \S, \R, \D \rangle$ be a \gls{EAF} and $S' \subseteq \S$ for the following definitions.

\begin{definition}
$A$ \textbf{defeats$_{S'}$} $B$ iff $(A, B) \in \R$ and $\not \exists C \in S': (C, (A, B)) \in \D$. If $A$ defeats\low{S'} $B$ and $B$ does not defeat\low{S'} $A$ then $A$ \textbf{strictly} defeats\low{S'} $B$.
\end{definition}

\begin{notation}
For the rest of the document $A \rightarrow^{S'} B$ denotes that $A$ defeats\low{S'} B and $A \nrightarrow^{S'} B$ denotes that $A$ does not defeat\low{S'} $B$.
\end{notation}


By using this definition, similar properties (e.g. conflict-free and admissible sets, acceptability of an argument, sceptically/credulously accepted arguments, extensions) as in Dung's argumentation framework can be introduced and defined.

\begin{definition}
	$S'$ is \textbf{conflict free} iff $\forall A, B \in S': (A, B) \in \R \Rightarrow (B, A) \notin \R \wedge \exists C \in S': (C, (A, B)) \in \D$ \textit{(a subset is only conflict free, if for every attack within the subset there is no counter attack and the attack itself is canceled out by an attack on this attack from an argument that is part of the subset as well)}.
\end{definition}


\begin{figure}[h]
\centering
\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=2cm,
                    thick]

  \node[main] (C) [above right of=A] {C};
  \node[main] (A) [below left of=C]{A};
  \node[main] (B) [below right of=C] {B};
  
  \path[every node/.style={font=\sffamily\small}]
    (A) edge [] coordinate [pos=0.5] (AB) node [left] {} (B)
    ;
   \path [every node/.style={red}] 
   (C) edge [->>] node [left] {} (AB)
   ;
\end{tikzpicture}
\caption{\gls{EAF} with $\langle \S, \R, \D \rangle = \langle \{A, B, C\}, \{(A, B)\}, \{(C, (A, B))\} \rangle$}
\label{fig:eaf_small}
\end{figure}

\begin{exa}
	The set $S' = \{A, B\}$ of the \gls{EAF} in \autoref{fig:eaf_small} is not conflict-free. But the set $S' = \{A, B, C\}$ is conflict-free as $C$ attacks the attack between $A$ and $B$ and cancels it out.
\end{exa}

\begin{lemma}
Let $S'$ be a conflict-free subset of $\S$ in $\langle \S, \R, \D \rangle$. Then for any $A, B \in S'$ $A$ does not defeat\low{S'} $B$.
\end{lemma}

\begin{definition}

$R_{S'} = \{X_1 \rightarrow^{S'} Y_1, ..., 	X_n \rightarrow^{S'} Y_n\}$ is called a \textbf{reinstatement set} for $C \rightarrow^{S'} B$ ($C$ defeats\low{S'} $B$), iff:
\begin{itemize}
	\item $C \rightarrow^{S'} B \in R_{S'}$,
	\item $\forall_{i=1}^n X_i \in S'$,
	\item $\forall X \rightarrow^{S'} Y \in R_{S'}, \forall Y': (Y', (X, Y)) \in \D$, there is a $X' \rightarrow^{S'} Y' \in R_{S'}$.
\end{itemize}
\textit{(A set of attacks is called a reinstatement set (for a particular attack $C \rightarrow^{S'} B$), if for every attack relation in $R_{S'}$, which is attacked from another argument $Y'$, there is a attack relation in $R_{S'}$ that attacks this argument $Y'$ again and ensures the attack on the argument to hold. So a reinforcement sets guaranties that an attack on an argument is successfully performed, nevertheless what other attacks in the system exist. Hence these reinforcement sets can be used to define acceptability of arguments as seen in \autoref{def:eaf:acceptable}.)}
\end{definition}

The acceptability of an argument can now be formally defined based on the reinstatement set.

\begin{definition}
\label{def:eaf:acceptable}
$A \in \S$ is \textbf{acceptable} w.r.t.	 $S'$, iff: $\forall B: B \rightarrow^{S'} A$, there is a $C \in S': C \rightarrow^{S'} B$ and there is a reinstatement set for $C \rightarrow^{S'} B$.
\end{definition}


\begin{figure}[h]
	\centering
	\subfigure[0.3\textwidth][$A_1$ is not acceptable w.r.t $S' = \{A_1, A_2\}$]{
		\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=1.2cm,thin]
		
		  \node[n_fill_red,small] (A1) [] {$A_1$};
		  \node[n_fill_gray,small] (A2) [right of=A1]{$A_2$};
		  \node[small] (B1) [below of=A1] {$B_1$};
		  \node[small] (B2) [below of=A2] {$B_2$};
		  \node[small] (B3) [right of=B2] {$B_3$};
		      
		  \path[every node/.style={font=\sffamily\small}]
		    (A1) edge [bend left] coordinate [pos=0.5] (A1B1) node [left] {} (B1)
		    (B1) edge [bend left] coordinate [pos=0.5] (B1A1) node [left] {} (A1)
			(A2) edge [] coordinate [pos=0.5] (A2B2) node [left] {} (B2)
		    ;
		   \path [every node/.style={red}] 
		   (B2) edge [->>] node [left] {} (A1B1)
		   (B3) edge [->>] node [left] {} (A2B2)
		   ;
		\end{tikzpicture}
		\label{fig:eaf_not_acceptable}
	}
	\hfill
	\subfigure[0.3\textwidth][$C$ is acceptable w.r.t $S' = \{A_1, A_2, A_3\}$]{
		\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=1.2cm,
		                    thin]
		
		  \node[n_fill_gray,small] (A1) [] {$A_1$};
		  \node[n_fill_gray,small] (A2) [right of=A1]{$A_2$};
		  \node[n_fill_gray,small] (A3) [right of=A2]{$A_3$};
		  \node[small] (B1) [below of=A1] {$B_1$};
		  \node[small] (B2) [below of=A2] {$B_2$};
		  \node[small] (B3) [below of=A3] {$B_3$};
		  \node[n_fill_green,small] (C) [left of=B1] {$C$};      
		
		  \path[every node/.style={font=\sffamily\small}]
		    (A1) edge [] coordinate [pos=0.5] (A1B1) node [left] {} (B1)
		    (A2) edge [] coordinate [pos=0.5] (A2B2) node [left] {} (B2)
		    (A3) edge [] coordinate [pos=0.5] (A3B3) node [left] {} (B3)
			(A2) edge [] coordinate [pos=0.5] (A2B2) node [left] {} (B2)
			(B1) edge [] coordinate [pos=0.5] (B1C) node [left] {} (C)
		    ;
		   \path [every node/.style={red}] 
		   (B2) edge [->>] node [left] {} (A1B1)
		   (B2) edge [->>] node [left] {} (A3B3)
		   (B3) edge [->>] node [left] {} (A2B2)
		   ;
		\end{tikzpicture}
		\label{fig:eaf_acceptable}
	}
	\hfill
	\subfigure[0.3\textwidth][$C$ is not acceptable w.r.t $S' = \{A_1, A_2, A_3\}$]{
		\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=1.2cm,
		                    thin]
		
		  \node[n_fill_gray,small] (A1) [] {$A_1$};
		  \node[n_fill_gray,small] (A2) [right of=A1]{$A_2$};
		  \node[n_fill_gray,small] (A3) [right of=A2]{$A_3$};
		  \node[small] (B1) [below of=A1] {$B_1$};
		  \node[small] (B2) [below of=A2] {$B_2$};
		  \node[small] (B3) [below of=A3] {$B_3$};
		  \node[small] (B4) [right of=B3] {$B_4$};
		  \node[n_fill_red,small] (C) [left of=B1] {$C$};      
		
		  \path[every node/.style={font=\sffamily\small}]
		    (A1) edge [] coordinate [pos=0.5] (A1B1) node [left] {} (B1)
		    (A2) edge [] coordinate [pos=0.5] (A2B2) node [left] {} (B2)
		    (A3) edge [] coordinate [pos=0.5] (A3B3) node [left] {} (B3)
			(A2) edge [] coordinate [pos=0.5] (A2B2) node [left] {} (B2)
			(B1) edge [] coordinate [pos=0.5] (B1C) node [left] {} (C)
		    ;
		   \path [every node/.style={red}] 
		   (B2) edge [->>] node [left] {} (A1B1)
		   (B2) edge [->>] node [left] {} (A3B3)
		   (B3) edge [->>] node [left] {} (A2B2)
		   (B4) edge [->>] node [left] {} (A3B3)
		   ;
		\end{tikzpicture}
		\label{fig:eaf_not_acceptable_big}
	}
	\caption{\glspl{EAF} with acceptable and not acceptable sets $S'$. $A_x$ are elements of $S'$.}
\end{figure}

\begin{exa}
	In Figure \autoref{fig:eaf_not_acceptable} $S'=\{A_1, A_2\}$ is not admissible since $A_1$ is not acceptable w.r.t. $S'$. In Figure \autoref{fig:eaf_acceptable} $C$ is acceptable w.r.t $S' = \{A_1, A_2, A_3\}$ as there is a reinstatement set $\{A_1 \rightarrow^{S'} B_1, A_2 \rightarrow^{S'} B_2, A_3 \rightarrow^{S'} B_3\}$ for $A_1 \rightarrow^{S'} B_1$. In Figure \autoref{fig:eaf_not_acceptable_big} there is an additional argument $B_4$ such that $B_4 \rightarrow (C_3 \rightarrow B_3)$ and no argument in $S'$ that defeats\low{S'} $B_4$, then no reinstatement set for $A_1 \rightarrow^{S'} B_1$ would exist, hence $C$ is not acceptable w.r.t. $S'$.
\end{exa}

Similar to Dung's theory, admissible, preferred, complete and stable extensions of an \gls{EAF} can now be defined.


\begin{definition}
	Let $S'$ be a \textbf{conflict free} subset of $\S$ in $\langle \S, \R, \D \rangle$. Then:
	\begin{itemize}
		\item $S'$ is an \textbf{admissible} extension iff every argument in $S'$ is acceptable w.r.t $S'$.
		\item $S'$ is a \textbf{preferred} extension iff $S'$ is (w.r.t. set inclusion) a maximal admissible extension.
		\item $S'$ is a \textbf{complete} extension iff each argument which is acceptable w.r.t. $S'$ is in $S'$.
		\item $S'$ is a \textbf{stable} extension iff $\forall B \notin S', \exists A \in S'$ such that $A$ defeats\low{S'} $B$.
	\end{itemize}
\end{definition}


By using this definition, we can define again \textbf{sceptically}, respectively \textbf{credulously}, accepted arguments under the semantic $ s \in $\{preferred, complete, stable\} iff $A$ is in every (at least one) $s$ extension. 
\begin{exa}
	The example given in \autoref{fig:eaf_intro} has only the single preferred, complete and stable extension $\{B, C, E\}$. \autoref{fig:eaf_small} has the admissible sets $\{A\}, \{A, C\}, \{A, B, C\}$. $\{A, B, C\}$ is the only preferred extension which is as well stable.
\end{exa}

\begin{lemma}
	Let $\Delta = \langle \S, \R, \D \rangle$ be an \gls{EAF}, $S'$ an admissible extension of $\Delta$ and let $A, A'$ be arguments which are acceptable w.r.t. $S'$. Then:
	\begin{itemize}
		\item $S'' = S' \cup \{A\}$ is admissible.
		\item $A'$ is acceptable w.r.t. $S''$.
	\end{itemize}	
\end{lemma}

\begin{lemma}
	Let $\Delta = \langle \S, \R, \D \rangle$ be an \gls{EAF}. 
	\begin{itemize}
		\item The set of all admissible extensions of $\Delta$ form a complete partial order w.r.t. set inclusion.
		\item For each admissible extension $E$ of $\Delta$ there exists a preferred extension $E'$ such that $E\subseteq E'$.
	\end{itemize}
	\label{lem:eaf:partialorder}
\end{lemma}

The definition of the characteristic function for an \gls{EAF} is similar but not equal to Dung's definition. 

\begin{definition}
	Let $\Delta = \langle \S, \R, \D \rangle$ be an \gls{EAF}, $S'\subseteq \S$, and $2^{\S_C}$ denote the set of all conflict free subsets of $\S$. The \textbf{characteristic function} $F_\Delta$ of $\Delta$ is defined as follows:
	\begin{itemize}
		\item $F_\Delta: 2^{\S_C} \rightarrow 2^{\S}$
		\item $F_\Delta(S') = \{A | A~\text{is acceptable w.r.t.~}S'\}$.
	\end{itemize}
\end{definition}

From here on we will always refer to a fixed \gls{EAF}, hence we can simply write $F$ rather than $F_\Delta$. Equally to Dung's Framework, any conflict-free set $S' \subseteq \S$ in $\Delta$ is admissible iff $S' \subseteq F(S')$, and complete iff $S'$ is a fixed point of $F$. We can apply $F$ iteratively on an \gls{EAF}: $F^0 = \emptyset, F^{i+1} = F(F^i))$. Note, that for \glspl{EAF} the characteristic function $F$ is in general \textbf{not} monotonic (e.g. $C$ is acceptable w.r.t $S'= \{A_1, A_2, A_3\}$ in \autoref{fig:eaf_acceptable}, but is not acceptable w.r.t. the conflict-free $S'' = S' \cup \{B_2, B_3\}$).
\begin{lemma}
Let $F$ be the characteristic function of an \gls{EAF}, and $F^0 = \emptyset, F^{i+1} = F(F^i)$. Then $\forall i, F^i \subseteq F^{i+1}$ and $F^i$ is conflict free.
\end{lemma}


\begin{definition}
	$\Delta = \langle \S, \R, \D \rangle$ is a \textbf{finitary} \gls{EAF} iff $\forall A \in \S$, the set $\{B | (B, A) \in \R\}$ is finite and $\forall (A, B) \in \R$, the set $\{C | (C, (A, B))\in \D\}$ is finite.
\end{definition}

\begin{definition}
	Let $\Delta$ be a finitary \gls{EAF} and $F^0 = \emptyset, F^{i+1} = F(F^i)$. Then $\cup_{i=0}^\infty(F^i)$ is the \textbf{grounded extension} $GE(\Delta)$ of $\Delta$.
\end{definition}


\begin{remark}
Similar to Dung's framework we can state the following relations between different extensions:
\begin{itemize}
	\item Every \gls{EAF} has at least one preferred extension (implied by \autoref{lem:eaf:partialorder} as $\emptyset$ is an admissible extension for every \gls{EAF}).
	\item Every stable extension of an \gls{EAF} is a preferred extension.
	\item The grounded extension for \gls{EAF} is not defined over the least fix point of the characteristic function $F$, but can be defined for finitary \glspl{EAF} over the union of all characteristic functions $F^i$.
\end{itemize}	
\end{remark}

In addition Modgil \textit{et al.} introduce in \cite{Modgil2009} the concept of a special class of \glspl{EAF}, \textit{hiearchical \glspl{EAF}}, which are defined by the existence of a partition of $\Delta$ into multiple regular Dung argumentation frameworks. Due to this restriction it is possible to define a least fix point of the characteristic function $F$, hence defining the grounded extension $GE(\Delta)$ in the same way as it has been defined in Dung's framework. However, this is a to narrow restriction for our purposes, therefore this will not be described here. 


